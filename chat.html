<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>n8n Chat –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</title>
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
  </style>
</head>
<body>
<script type="module">
  import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

  // üîç –ó—á–∏—Ç—É—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑ URL
  const params = new URLSearchParams(window.location.search);

  const session_id = params.get('session_id') || 'unknown-session';
  const customer_id = params.get('customer_id') || 'unknown-customer';
  const user = params.get('user') || 'anonymous';

  // üì¶ –§–æ—Ä–º—É—î–º–æ metadata
  const metadata = {
    session_id,
    customer_id,
    user
  };

  // üí¨ –í–∏–≤–æ–¥–∏–º–æ –ø–µ—Ä—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  const initialMessages = [
    `üëã –ü—Ä–∏–≤—ñ—Ç, ${user}!`,
    `–¶–µ —á–∞—Ç –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ ${customer_id} (—Å–µ—Å—ñ—è: ${session_id})`,
  ];

  // ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫–∞—î–º–æ —á–∞—Ç
  createChat({
    mode: 'fullscreen',
    webhookUrl: 'https://n8n.boni.tools/webhook/65cedb3a-eedf-4ab5-ba41-fd9553e787e6/chat',
    metadata: metadata,
    initialMessages: initialMessages
  });
</script>
</body>
</html>
